<!DOCTYPE html>
<html>
<head>
    <title>Track Satellite</title>
    <!-- <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" /> -->
    <!-- <link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' /> -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' />
    <!-- <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"> -->
    <!-- <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' /> -->
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%;}
    </style>

</head>

<body>
<div id="map"></div>

<!-- <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script> -->
<!-- <script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script> -->
<!-- <script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-heat/v0.1.3/leaflet-heat.js"></script> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.js'></script>
<script>
  var lat = 41.103900;
  var lon = 29.026858;
  var rotate = 90;
  // Turkey Bbox  35.741160, 25.224008 , 42.581538, 44.95184,
  function satelliteTimer() {
    // var xIncre = 0.0001
    // var yIncre = -0.0001
    // if (lon < 25.224008) {xIncre = 0.0001;}
    // if (lon > 44.95184) {xIncre = -0.0001}
    // if (lat < 25.225008) {yIncre = 0.0001}
    // if (lat > 44.95284) {yIncre = -0.0001}
    // lat = lat + yIncre
    // lon = lon + xIncre
    // if (lat > 80 ||  lon > 150){
    //   lat = 37;
    //   lon = 29;
    // } else {
      lat = lat - 0.0001
      lon = lon + 0.0001
    //   rotate = rotate + 1
    // }
  };
  var satelliteCoord = setInterval(satelliteTimer, 10);
</script>
<script>
// Fix mapbox token
mapboxgl.accessToken = 'pk.eyJ1IjoiemlhLW0iLCJhIjoiQjM5aVpfTSJ9.s_U7YxQCK-Zq5SaJemH5bA';

// Initialize the map
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/mapbox/satellite-streets-v9', //More here https://www.mapbox.com/api-documentation/#styles
    center: [lon, lat], // starting position
    zoom: 10, // starting zoom
    minZoom: 1,
    maxZoom: 10,
});

var pointRocket = {
  "type": "Point",
  "coordinates": [lon, lat]
};

// add the GeoJSON above to a new vector tile source
var sourceRocket = new mapboxgl.GeoJSONSource({
    data: pointRocket
});

function setPosition() {
  pointRocket.coordinates[0] = lon;
  pointRocket.coordinates[1] = lat;
  sourceRocket.setData(pointRocket);
  map.setCenter(pointRocket.coordinates);
  map.setLayoutProperty('pointRocket', 'icon-rotate', rotate);
}

map.on('load', function () {
    map.addSource('sourceRocket', sourceRocket);
    map.addLayer({
        "id": "pointRocket",
        "type": "symbol",
        "source": "sourceRocket",
        "paint": {
          "text-color": "#C10000",
          "text-halo-color": "rgba(255, 255, 255, 1)",
          "text-halo-width": 1
        },
        "layout": {
          "icon-image": "rocket-15",
          "icon-rotate": rotate,
          "text-field": "MODIS",
          "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
          "text-offset": [0, -2],
          "text-anchor": "top"
        },

    });
    window.setInterval(setPosition, 10);
});


</script>





</body>
</html>
