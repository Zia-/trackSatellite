<!DOCTYPE html>
<html>
<head>
    <title>Track Satellite</title>
    <!-- <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" /> -->
    <!-- <link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' /> -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' />
    <!-- <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"> -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%;}
    </style>

</head>

<body>
<div id="map"></div>

<!-- <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script> -->
<!-- <script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script> -->
<!-- <script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-heat/v0.1.3/leaflet-heat.js"></script> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.js'></script>
<script>
  var lat = 37;
  var lon = 29;
  function satelliteTimer() {
    if (lat > 80 ||  lon > 150){
      lat = 37;
      lon = 29;
    } else {
      lat = lat + 0.001
      lon = lon + 0.001
    }
  };
  var satelliteCoord = setInterval(satelliteTimer, 100);
</script>
<script>
// Fix mapbox token
mapboxgl.accessToken = 'pk.eyJ1IjoiemlhLW0iLCJhIjoiQjM5aVpfTSJ9.s_U7YxQCK-Zq5SaJemH5bA';

// Initialize the map
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/mapbox/satellite-streets-v9', //More here https://www.mapbox.com/api-documentation/#styles
    center: [lon, lat], // starting position
    zoom: 6, // starting zoom
    minZoom: 5,
    maxZoom: 15,
});

var pointRocket = {
  "type": "Point",
  "coordinates": [lon, lat]
};

// var pointCircle = {
//   "type": "Point",
//   "coordinates": [lon, lat]
// };
// var pointLeftLeftTriangle = {
//   "type": "Point",
//   "coordinates": [lon-0.1, lat-0.1]
// };
// var pointLeftTriangle = {
//   "type": "Point",
//   "coordinates": [lon-0.05, lat-0.05]
// };
// var pointRigthRightTriangle = {
//   "type": "Point",
//   "coordinates": [lon+0.1, lat+0.1]
// };
// var pointRigthTriangle = {
//   "type": "Point",
//   "coordinates": [lon+0.05, lat+0.05]
// };

// add the GeoJSON above to a new vector tile source
var sourceRocket = new mapboxgl.GeoJSONSource({
    data: pointRocket
});
// var sourceLeftLeftTriangle = new mapboxgl.GeoJSONSource({
//     data: pointLeftLeftTriangle
// });
// var sourceLeftTriangle = new mapboxgl.GeoJSONSource({
//     data: pointLeftTriangle
// });
// var sourceRigthRightTriangle = new mapboxgl.GeoJSONSource({
//     data: pointRigthRightTriangle
// });
// var sourceRigthTriangle = new mapboxgl.GeoJSONSource({
//     data: pointRigthTriangle
// });

function setPosition() {
  pointRocket.coordinates[0] = lon;
  pointRocket.coordinates[1] = lat;
  sourceRocket.setData(pointRocket);
  map.setCenter(pointRocket.coordinates);
  // pointLeftLeftTriangle.coordinates[0] = lon-0.1;
  // pointLeftLeftTriangle.coordinates[1] = lat-0.1;
  // sourceLeftLeftTriangle.setData(pointLeftLeftTriangle);
  // pointLeftTriangle.coordinates[0] = lon-0.05;
  // pointLeftTriangle.coordinates[1] = lat-0.05;
  // sourceLeftTriangle.setData(pointLeftTriangle);
  // pointRigthRightTriangle.coordinates[0] = lon+0.1;
  // pointRigthRightTriangle.coordinates[1] = lat+0.1;
  // sourceRigthRightTriangle.setData(pointRigthRightTriangle);
  // pointRigthTriangle.coordinates[0] = lon+0.05;
  // pointRigthTriangle.coordinates[1] = lat+0.05;
  // sourceRigthTriangle.setData(pointRigthTriangle);
}

map.on('load', function () {
    map.addSource('sourceRocket', sourceRocket);
    // map.addSource('sourceLeftLeftTriangle', sourceLeftLeftTriangle);
    // map.addSource('sourceLeftTriangle', sourceLeftTriangle);
    // map.addSource('sourceRigthRightTriangle', sourceRigthRightTriangle);
    //map.addSource('sourceRightTriangle', sourceRightTriangle);

    // map.addLayer({
    //     "id": "pointCircle",
    //     "type": "symbol",
    //     "source": "sourceCircle",
    //     "layout": {
    //         "icon-image": "triangle-11",
    //     }
    // });
    //
    map.addLayer({
        "id": "pointRocket",
        "type": "symbol",
        "source": "sourceRocket",
        "paint": {
          "text-color": "#C10000",
          "text-halo-color": "rgba(255, 255, 255, 1)",
          "text-halo-width": 1
        },
        "layout": {
          "icon-image": "rocket-15",
          "text-field": "MODIS",
          "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
          "text-offset": [0, -2],
          "text-anchor": "top"
        },

    });
    //
    // map.addLayer({
    //     "id": "pointLeftTriangle",
    //     "type": "symbol",
    //     "source": "sourceLeftTriangle",
    //     "layout": {
    //         "icon-image": "triangle-11",
    //     }
    // });
    //
    // map.addLayer({
    //     "id": "pointRigthRightTriangle",
    //     "type": "symbol",
    //     "source": "sourceRigthRightTriangle",
    //     "layout": {
    //         "icon-image": "triangle-11",
    //     }
    // });
    //
    // map.addLayer({
    //     "id": "pointRightTriangle",
    //     "type": "symbol",
    //     "source": "sourceRightTriangle",
    //     "layout": {
    //         "icon-image": "triangle-11",
    //     }
    // });

    // map.addLayer({
    //     "id": "drone-glow",
    //     "type": "circle",
    //     "source": "drone",
    //     "paint": {
    //         "circle-radius": 40,
    //         "circle-color": "#fff",
    //         "circle-opacity": 0.1
    //     }
    // });

    // map.addLayer({
    //     "id": "drone",
    //     "type": "symbol",
    //     "source": "drone",
    //
    //     "layout": {
    //         // "icon-image": 'drone-md.png',
    //         // "icon-image" : {"sprite": "drone-md.png"},
    //         "url": "drone-md.png"
    //
    //     }
    // });

    window.setInterval(setPosition, 10);
});


</script>





</body>
</html>
